<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto-Observation & Journal</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        input[type="range"] {
            background: linear-gradient(to right, #86efac, #fde047, #fca5a5);
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: white;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            border: 3px solid #9333ea;
        }
        input[type="range"]::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: white;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            border: 3px solid #9333ea;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        // Icônes Lucide simplifiées en SVG
        const Wine = ({ size = 24, className = "", style = {} }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} style={style}>
                <path d="M8 22h8M7 10h10M12 15v7m-4-10.5c0-1.5 1.5-3 4-3s4 1.5 4 3-1.5 3-4 3-4-1.5-4-3z"/>
            </svg>
        );
        
        const Beer = ({ size = 24, className = "", style = {} }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} style={style}>
                <path d="M17 11h1a3 3 0 0 1 0 6h-1M9 12v6M15 12v6M8 22h8a2 2 0 0 0 2-2V8H6v12a2 2 0 0 0 2 2z"/>
            </svg>
        );
        
        const Martini = ({ size = 24, className = "", style = {} }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} style={style}>
                <path d="M8 22h8M12 11v11M4 3l8 8 8-8"/>
            </svg>
        );
        
        const BookOpen = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2zM22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
            </svg>
        );
        
        const Activity = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
            </svg>
        );
        
        const Calendar = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                <line x1="16" y1="2" x2="16" y2="6"/>
                <line x1="8" y1="2" x2="8" y2="6"/>
                <line x1="3" y1="10" x2="21" y2="10"/>
            </svg>
        );
        
        const Plus = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <line x1="12" y1="5" x2="12" y2="19"/>
                <line x1="5" y1="12" x2="19" y2="12"/>
            </svg>
        );
        
        const Trash2 = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <polyline points="3 6 5 6 21 6"/>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
            </svg>
        );
        
        const Save = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
                <polyline points="17 21 17 13 7 13 7 21"/>
                <polyline points="7 3 7 8 15 8"/>
            </svg>
        );
        
        const Download = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="7 10 12 15 17 10"/>
                <line x1="12" y1="15" x2="12" y2="3"/>
            </svg>
        );
        
        const Upload = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="17 8 12 3 7 8"/>
                <line x1="12" y1="3" x2="12" y2="15"/>
            </svg>
        );

        const AlcoholTracker = () => {
          const [entries, setEntries] = React.useState([]);
          const [journalEntries, setJournalEntries] = React.useState([]);
          const [activeTab, setActiveTab] = React.useState('consumption');
          const [showForm, setShowForm] = React.useState(false);
          const [showJournalForm, setShowJournalForm] = React.useState(false);
          const [showBackupMenu, setShowBackupMenu] = React.useState(false);
          
          const [formData, setFormData] = React.useState({
            date: new Date().toISOString().slice(0, 16),
            units: 1,
            drink: 'wine',
            context: '',
            mood: '',
            craving: 5
          });

          const [journalData, setJournalData] = React.useState({
            date: new Date().toISOString().slice(0, 16),
            title: '',
            content: '',
            mood: '',
            energy: 5
          });

          React.useEffect(() => {
            const saved = localStorage.getItem('alcoholEntries');
            const savedJournal = localStorage.getItem('journalEntries');
            if (saved) {
              try {
                setEntries(JSON.parse(saved));
              } catch (e) {
                console.error('Error loading saved entries:', e);
              }
            }
            if (savedJournal) {
              try {
                setJournalEntries(JSON.parse(savedJournal));
              } catch (e) {
                console.error('Error loading journal entries:', e);
              }
            }
          }, []);

          React.useEffect(() => {
            localStorage.setItem('alcoholEntries', JSON.stringify(entries));
          }, [entries]);

          React.useEffect(() => {
            localStorage.setItem('journalEntries', JSON.stringify(journalEntries));
          }, [journalEntries]);

          const drinkTypes = {
            beer: { icon: Beer, label: 'Bière (chope)', color: '#F59E0B' },
            champagne: { icon: Martini, label: 'Champagne', color: '#FCD34D' },
            wine: { icon: Wine, label: 'Vin', color: '#DC2626' },
            aperitif: { icon: Wine, label: 'Apéritif', color: '#F97316' },
            whisky: { icon: Wine, label: 'Whisky', color: '#92400E' },
            pastis: { icon: Wine, label: 'Pastis', color: '#FBBF24' }
          };

          const addEntry = () => {
            const newEntry = {
              id: Date.now(),
              ...formData,
              timestamp: new Date().toISOString()
            };
            setEntries([newEntry, ...entries]);
            setFormData({
              date: new Date().toISOString().slice(0, 16),
              units: 1,
              drink: 'wine',
              context: '',
              mood: '',
              craving: 5
            });
            setShowForm(false);
          };

          const addJournalEntry = () => {
            const newEntry = {
              id: Date.now(),
              ...journalData,
              timestamp: new Date().toISOString()
            };
            setJournalEntries([newEntry, ...journalEntries]);
            setJournalData({
              date: new Date().toISOString().slice(0, 16),
              title: '',
              content: '',
              mood: '',
              energy: 5
            });
            setShowJournalForm(false);
          };

          const deleteEntry = (id) => {
            setEntries(entries.filter(e => e.id !== id));
          };

          const deleteJournalEntry = (id) => {
            setJournalEntries(journalEntries.filter(e => e.id !== id));
          };

          const exportData = () => {
            try {
              const data = {
                entries,
                journalEntries,
                exportDate: new Date().toISOString(),
                version: '1.0'
              };
              const jsonString = JSON.stringify(data, null, 2);
              const blob = new Blob([jsonString], { type: 'application/json' });
              const url = URL.createObjectURL(blob);
              const link = document.createElement('a');
              link.href = url;
              const filename = `backup-${new Date().toISOString().slice(0, 10)}.json`;
              link.download = filename;
              document.body.appendChild(link);
              link.click();
              document.body.removeChild(link);
              setTimeout(() => URL.revokeObjectURL(url), 100);
              alert('Sauvegarde téléchargée avec succès !');
            } catch (error) {
              console.error('Erreur lors de l\'export:', error);
              alert('Erreur lors de l\'export des données.');
            }
          };

          const importData = (event) => {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = (e) => {
              try {
                const data = JSON.parse(e.target.result);
                if (data.entries) setEntries(data.entries);
                if (data.journalEntries) setJournalEntries(data.journalEntries);
                alert('Données importées avec succès !');
                setShowBackupMenu(false);
              } catch (error) {
                alert('Erreur lors de l\'import. Vérifiez que le fichier est valide.');
              }
            };
            reader.readAsText(file);
          };

          const clearAllData = () => {
            if (confirm('Êtes-vous sûr de vouloir effacer TOUTES vos données ? Cette action est irréversible.')) {
              setEntries([]);
              setJournalEntries([]);
              localStorage.removeItem('alcoholEntries');
              localStorage.removeItem('journalEntries');
              alert('Toutes les données ont été effacées.');
              setShowBackupMenu(false);
            }
          };

          const formatDate = (dateString) => {
            const date = new Date(dateString);
            return date.toLocaleDateString('fr-FR', {
              weekday: 'long',
              year: 'numeric',
              month: 'long',
              day: 'numeric',
              hour: '2-digit',
              minute: '2-digit'
            });
          };

          const getTotalUnits = () => {
            return entries.reduce((sum, entry) => sum + Number(entry.units), 0);
          };

          const getWeeklyUnits = () => {
            const oneWeekAgo = new Date();
            oneWeekAgo.setDate(oneWeekAgo.getDate() - 7);
            return entries
              .filter(e => new Date(e.date) >= oneWeekAgo)
              .reduce((sum, entry) => sum + Number(entry.units), 0);
          };

          return (
            <div className="min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-4 md:p-8">
              <div className="max-w-4xl mx-auto">
                <div className="bg-white/80 backdrop-blur-lg rounded-3xl shadow-2xl p-8 mb-6 border border-white/20">
                  <div className="flex items-center justify-between mb-6">
                    <h1 className="text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600">
                      Auto-Observation & Journal
                    </h1>
                    <button
                      onClick={() => setShowBackupMenu(!showBackupMenu)}
                      className="p-3 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-xl shadow-lg transform transition-all hover:scale-110 active:scale-95"
                      title="Gestion des sauvegardes"
                    >
                      <Save size={24} />
                    </button>
                  </div>
                  
                  <div className="flex gap-2 mb-6">
                    <button
                      onClick={() => setActiveTab('consumption')}
                      className={`flex-1 py-3 px-6 rounded-xl font-semibold transition-all transform hover:scale-105 flex items-center justify-center gap-2 ${
                        activeTab === 'consumption'
                          ? 'bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg'
                          : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                      }`}
                    >
                      <Activity size={20} />
                      Consommations
                    </button>
                    <button
                      onClick={() => setActiveTab('journal')}
                      className={`flex-1 py-3 px-6 rounded-xl font-semibold transition-all transform hover:scale-105 flex items-center justify-center gap-2 ${
                        activeTab === 'journal'
                          ? 'bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg'
                          : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                      }`}
                    >
                      <BookOpen size={20} />
                      Journal
                    </button>
                  </div>

                  {activeTab === 'consumption' && (
                    <>
                      <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mt-6">
                        <div className="bg-gradient-to-br from-purple-100 to-purple-50 rounded-2xl p-4 transform transition-all hover:scale-105 hover:shadow-lg">
                          <div className="text-sm text-purple-600 font-medium">Total général</div>
                          <div className="text-3xl font-bold text-purple-700">{getTotalUnits()}</div>
                          <div className="text-xs text-purple-500">unités consommées</div>
                        </div>
                        
                        <div className="bg-gradient-to-br from-pink-100 to-pink-50 rounded-2xl p-4 transform transition-all hover:scale-105 hover:shadow-lg">
                          <div className="text-sm text-pink-600 font-medium">Cette semaine</div>
                          <div className="text-3xl font-bold text-pink-700">{getWeeklyUnits()}</div>
                          <div className="text-xs text-pink-500">unités (7 derniers jours)</div>
                        </div>
                        
                        <div className="bg-gradient-to-br from-blue-100 to-blue-50 rounded-2xl p-4 transform transition-all hover:scale-105 hover:shadow-lg">
                          <div className="text-sm text-blue-600 font-medium">Entrées</div>
                          <div className="text-3xl font-bold text-blue-700">{entries.length}</div>
                          <div className="text-xs text-blue-500">occasions enregistrées</div>
                        </div>
                      </div>

                      <button
                        onClick={() => setShowForm(!showForm)}
                        className="mt-6 w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-4 rounded-2xl font-semibold shadow-lg transform transition-all hover:scale-105 hover:shadow-xl active:scale-95 flex items-center justify-center gap-2"
                      >
                        <Plus size={24} />
                        Nouvelle consommation
                      </button>
                    </>
                  )}

                  {activeTab === 'journal' && (
                    <>
                      <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
                        <div className="bg-gradient-to-br from-indigo-100 to-indigo-50 rounded-2xl p-4 transform transition-all hover:scale-105 hover:shadow-lg">
                          <div className="text-sm text-indigo-600 font-medium">Total d'entrées</div>
                          <div className="text-3xl font-bold text-indigo-700">{journalEntries.length}</div>
                          <div className="text-xs text-indigo-500">notes dans votre journal</div>
                        </div>
                        
                        <div className="bg-gradient-to-br from-teal-100 to-teal-50 rounded-2xl p-4 transform transition-all hover:scale-105 hover:shadow-lg">
                          <div className="text-sm text-teal-600 font-medium">Cette semaine</div>
                          <div className="text-3xl font-bold text-teal-700">
                            {journalEntries.filter(e => {
                              const oneWeekAgo = new Date();
                              oneWeekAgo.setDate(oneWeekAgo.getDate() - 7);
                              return new Date(e.date) >= oneWeekAgo;
                            }).length}
                          </div>
                          <div className="text-xs text-teal-500">notes récentes</div>
                        </div>
                      </div>

                      <button
                        onClick={() => setShowJournalForm(!showJournalForm)}
                        className="mt-6 w-full bg-gradient-to-r from-indigo-600 to-teal-600 text-white py-4 rounded-2xl font-semibold shadow-lg transform transition-all hover:scale-105 hover:shadow-xl active:scale-95 flex items-center justify-center gap-2"
                      >
                        <Plus size={24} />
                        Nouvelle note de journal
                      </button>
                    </>
                  )}
                </div>

                {showBackupMenu && (
                  <div className="bg-white/80 backdrop-blur-lg rounded-3xl shadow-2xl p-8 mb-6 border border-white/20">
                    <h2 className="text-2xl font-bold text-gray-800 mb-6">Gestion des sauvegardes</h2>
                    
                    <div className="space-y-4">
                      <div className="bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl p-6 border-2 border-green-200">
                        <div className="flex items-center gap-3 mb-3">
                          <Download size={24} className="text-green-600" />
                          <h3 className="text-lg font-semibold text-gray-800">Exporter mes données</h3>
                        </div>
                        <p className="text-sm text-gray-600 mb-4">
                          Téléchargez toutes vos données (consommations et journal) dans un fichier JSON.
                        </p>
                        <button
                          onClick={exportData}
                          className="w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white py-3 rounded-xl font-semibold shadow-lg transform transition-all hover:scale-105 active:scale-95"
                        >
                          Télécharger la sauvegarde
                        </button>
                      </div>

                      <div className="bg-gradient-to-r from-blue-50 to-cyan-50 rounded-2xl p-6 border-2 border-blue-200">
                        <div className="flex items-center gap-3 mb-3">
                          <Upload size={24} className="text-blue-600" />
                          <h3 className="text-lg font-semibold text-gray-800">Importer des données</h3>
                        </div>
                        <p className="text-sm text-gray-600 mb-4">
                          Restaurez vos données à partir d'un fichier de sauvegarde précédent.
                        </p>
                        <input
                          type="file"
                          accept=".json"
                          onChange={importData}
                          className="hidden"
                          id="import-file"
                        />
                        <label
                          htmlFor="import-file"
                          className="block w-full bg-gradient-to-r from-blue-500 to-cyan-600 text-white py-3 rounded-xl font-semibold shadow-lg transform transition-all hover:scale-105 active:scale-95 text-center cursor-pointer"
                        >
                          Choisir un fichier
                        </label>
                      </div>

                      <div className="bg-gradient-to-r from-red-50 to-pink-50 rounded-2xl p-6 border-2 border-red-200">
                        <div className="flex items-center gap-3 mb-3">
                          <Trash2 size={24} className="text-red-600" />
                          <h3 className="text-lg font-semibold text-gray-800">Effacer toutes les données</h3>
                        </div>
                        <p className="text-sm text-gray-600 mb-4">
                          Supprimez définitivement toutes vos données. Cette action est irréversible !
                        </p>
                        <button
                          onClick={clearAllData}
                          className="w-full bg-gradient-to-r from-red-500 to-pink-600 text-white py-3 rounded-xl font-semibold shadow-lg transform transition-all hover:scale-105 active:scale-95"
                        >
                          Tout effacer
                        </button>
                      </div>

                      <button
                        onClick={() => setShowBackupMenu(false)}
                        className="w-full bg-gray-200 text-gray-700 py-3 rounded-xl font-semibold transform transition-all hover:bg-gray-300 active:scale-95"
                      >
                        Fermer
                      </button>
                    </div>
                  </div>
                )}

                {activeTab === 'consumption' && showForm && (
                  <div className="bg-white/80 backdrop-blur-lg rounded-3xl shadow-2xl p-8 mb-6 border border-white/20">
                    <div className="space-y-6">
                      <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                          <label className="block text-sm font-semibold text-gray-700 mb-2">
                            <Calendar size={16} className="inline mr-2" />
                            Date et heure
                          </label>
                          <input
                            type="datetime-local"
                            value={formData.date}
                            onChange={(e) => setFormData({...formData, date: e.target.value})}
                            className="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none transition-all"
                          />
                        </div>

                        <div>
                          <label className="block text-sm font-semibold text-gray-700 mb-2">
                            Nombre d'unités
                          </label>
                          <input
                            type="number"
                            min="0.5"
                            step="0.5"
                            value={formData.units}
                            onChange={(e) => setFormData({...formData, units: e.target.value})}
                            className="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none transition-all"
                          />
                        </div>
                      </div>

                      <div>
                        <label className="block text-sm font-semibold text-gray-700 mb-3">
                          Type de boisson
                        </label>
                        <div className="grid grid-cols-2 md:grid-cols-3 gap-3">
                          {Object.entries(drinkTypes).map(([key, {icon: Icon, label, color}]) => (
                            <button
                              key={key}
                              onClick={() => setFormData({...formData, drink: key})}
                              className={`p-4 rounded-xl border-2 transition-all transform hover:scale-105 ${
                                formData.drink === key
                                  ? 'border-purple-500 bg-purple-50 shadow-lg'
                                  : 'border-gray-200 hover:border-gray-300'
                              }`}
                            >
                              <Icon size={24} style={{color}} className="mx-auto mb-2" />
                              <div className="text-xs font-medium text-gray-700">{label}</div>
                            </button>
                          ))}
                        </div>
                      </div>

                      <div>
                        <label className="block text-sm font-semibold text-gray-700 mb-2">
                          Contexte / Événements / Activité
                        </label>
                        <textarea
                          value={formData.context}
                          onChange={(e) => setFormData({...formData, context: e.target.value})}
                          placeholder="Décrivez le contexte, l'ambiance, les déclencheurs..."
                          className="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none transition-all resize-none"
                          rows="3"
                        />
                      </div>

                      <div>
                        <label className="block text-sm font-semibold text-gray-700 mb-2">
                          Humeur / Émotion
                        </label>
                        <input
                          type="text"
                          value={formData.mood}
                          onChange={(e) => setFormData({...formData, mood: e.target.value})}
                          placeholder="Comment vous sentiez-vous ?"
                          className="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none transition-all"
                        />
                      </div>

                      <div>
                        <label className="block text-sm font-semibold text-gray-700 mb-2">
                          Envie de boire (0 = absence, 10 = insoutenable)
                        </label>
                        <div className="flex items-center gap-4">
                          <input
                            type="range"
                            min="0"
                            max="10"
                            value={formData.craving}
                            onChange={(e) => setFormData({...formData, craving: e.target.value})}
                            className="flex-1 h-3 rounded-full appearance-none cursor-pointer"
                          />
                          <span className="text-2xl font-bold text-purple-600 min-w-[3rem] text-center">
                            {formData.craving}
                          </span>
                        </div>
                      </div>

                      <div className="flex gap-3">
                        <button
                          onClick={addEntry}
                          className="flex-1 bg-gradient-to-r from-green-500 to-emerald-600 text-white py-3 rounded-xl font-semibold shadow-lg transform transition-all hover:scale-105 active:scale-95"
                        >
                          Enregistrer
                        </button>
                        <button
                          onClick={() => setShowForm(false)}
                          className="flex-1 bg-gray-200 text-gray-700 py-3 rounded-xl font-semibold transform transition-all hover:bg-gray-300 active:scale-95"
                        >
                          Annuler
                        </button>
                      </div>
                    </div>
                  </div>
                )}

                {activeTab === 'journal' && showJournalForm && (
                  <div className="bg-white/80 backdrop-blur-lg rounded-3xl shadow-2xl p-8 mb-6 border border-white/20">
                    <div className="space-y-6">
                      <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                          <label className="block text-sm font-semibold text-gray-700 mb-2">
                            <Calendar size={16} className="inline mr-2" />
                            Date et heure
                          </label>
                          <input
                            type="datetime-local"
                            value={journalData.date}
                            onChange={(e) => setJournalData({...journalData, date: e.target.value})}
                            className="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-indigo-500 focus:outline-none transition-all"
                          />
                        </div>

                        <div>
                          <label className="block text-sm font-semibold text-gray-700 mb-2">
                            Humeur
                          </label>
                          <input
                            type="text"
                            value={journalData.mood}
                            onChange={(e) => setJournalData({...journalData, mood: e.target.value})}
                            placeholder="Comment vous sentez-vous ?"
                            className="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-indigo-500 focus:outline-none transition-all"
                          />
                        </div>
                      </div>

                      <div>
                        <label className="block text-sm font-semibold text-gray-700 mb-2">
                          Titre (optionnel)
                        </label>
                        <input
                          type="text"
                          value={journalData.title}
                          onChange={(e) => setJournalData({...journalData, title: e.target.value})}
                          placeholder="Donnez un titre à cette entrée..."
                          className="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-indigo-500 focus:outline-none transition-all"
                        />
                      </div>

                      <div>
                        <label className="block text-sm font-semibold text-gray-700 mb-2">
                          Contenu de votre journée
                        </label>
                        <textarea
                          value={journalData.content}
                          onChange={(e) => setJournalData({...journalData, content: e.target.value})}
                          placeholder="Écrivez vos pensées, réflexions, ce qui s'est passé aujourd'hui..."
                          className="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-indigo-500 focus:outline-none transition-all resize-none"
                          rows="6"
                        />
                      </div>

                      <div>
                        <label className="block text-sm font-semibold text-gray-700 mb-2">
                          Niveau d'énergie (0 = épuisé, 10 = énergique)
                        </label>
                        <div className="flex items-center gap-4">
                          <input
                            type="range"
                            min="0"
                            max="10"
                            value={journalData.energy}
                            onChange={(e) => setJournalData({...journalData, energy: e.target.value})}
                            className="flex-1 h-3 rounded-full appearance-none cursor-pointer"
                          />
                          <span className="text-2xl font-bold text-indigo-600 min-w-[3rem] text-center">
                            {journalData.energy}
                          </span>
                        </div>
                      </div>

                      <div className="flex gap-3">
                        <button
                          onClick={addJournalEntry}
                          className="flex-1 bg-gradient-to-r from-green-500 to-emerald-600 text-white py-3 rounded-xl font-semibold shadow-lg transform transition-all hover:scale-105 active:scale-95"
                        >
                          Enregistrer
                        </button>
                        <button
                          onClick={() => setShowJournalForm(false)}
                          className="flex-1 bg-gray-200 text-gray-700 py-3 rounded-xl font-semibold transform transition-all hover:bg-gray-300 active:scale-95"
                        >
                          Annuler
                        </button>
                      </div>
                    </div>
                  </div>
                )}

                {activeTab === 'consumption' && (
                  <div className="space-y-4">
                    {entries.map((entry) => {
                      const DrinkIcon = drinkTypes[entry.drink].icon;
                      const drinkColor = drinkTypes[entry.drink].color;
                      
                      return (
                        <div
                          key={entry.id}
                          className="bg-white/80 backdrop-blur-lg rounded-2xl shadow-lg p-6 border border-white/20 transform transition-all hover:scale-[1.02] hover:shadow-2xl"
                        >
                          <div className="flex items-start justify-between mb-4">
                            <div className="flex items-center gap-3">
                              <div
                                className="p-3 rounded-xl shadow-md"
                                style={{backgroundColor: `${drinkColor}20`}}
                              >
                                <DrinkIcon size={24} style={{color: drinkColor}} />
                              </div>
                              <div>
                                <div className="font-bold text-gray-800">
                                  {entry.units} unité{entry.units > 1 ? 's' : ''} - {drinkTypes[entry.drink].label}
                                </div>
                                <div className="text-sm text-gray-500">
                                  {formatDate(entry.date)}
                                </div>
                              </div>
                            </div>
                            <button
                              onClick={() => deleteEntry(entry.id)}
                              className="p-2 text-red-500 hover:bg-red-50 rounded-lg transition-all transform hover:scale-110 active:scale-95"
                            >
                              <Trash2 size={20} />
                            </button>
                          </div>

                          {entry.context && (
                            <div className="mb-3">
                              <div className="text-xs font-semibold text-gray-500 mb-1">Contexte</div>
                              <div className="text-gray-700 bg-gray-50 rounded-lg p-3">{entry.context}</div>
                            </div>
                          )}

                          {entry.mood && (
                            <div className="mb-3">
                              <div className="text-xs font-semibold text-gray-500 mb-1">Humeur</div>
                              <div className="text-gray-700 bg-gray-50 rounded-lg p-3">{entry.mood}</div>
                            </div>
                          )}

                          <div className="flex items-center gap-2">
                            <div className="text-xs font-semibold text-gray-500">Envie:</div>
                            <div className="flex-1 h-2 bg-gray-200 rounded-full overflow-hidden">
                              <div
                                className="h-full rounded-full transition-all"
                                style={{
                                  width: `${entry.craving * 10}%`,
                                  backgroundColor: entry.craving <= 3 ? '#86efac' : entry.craving <= 6 ? '#fde047' : '#fca5a5'
                                }}
                              />
                            </div>
                            <div className="text-sm font-bold text-gray-700">{entry.craving}/10</div>
                          </div>
                        </div>
                      );
                    })}

                    {entries.length === 0 && (
                      <div className="text-center py-16 text-gray-400">
                        <Wine size={64} className="mx-auto mb-4 opacity-20" />
                        <p className="text-lg">Aucune consommation enregistrée</p>
                        <p className="text-sm">Cliquez sur "Nouvelle consommation" pour commencer</p>
                      </div>
                    )}
                  </div>
                )}

                {activeTab === 'journal' && (
                  <div className="space-y-4">
                    {journalEntries.map((entry) => (
                      <div
                        key={entry.id}
                        className="bg-white/80 backdrop-blur-lg rounded-2xl shadow-lg p-6 border border-white/20 transform transition-all hover:scale-[1.02] hover:shadow-2xl"
                      >
                        <div className="flex items-start justify-between mb-4">
                          <div className="flex items-center gap-3 flex-1">
                            <div className="p-3 rounded-xl shadow-md bg-indigo-100">
                              <BookOpen size={24} className="text-indigo-600" />
                            </div>
                            <div className="flex-1">
                              {entry.title && (
                                <div className="font-bold text-gray-800 text-lg mb-1">
                                  {entry.title}
                                </div>
                              )}
                              <div className="text-sm text-gray-500">
                                {formatDate(entry.date)}
                              </div>
                              {entry.mood && (
                                <div className="text-sm text-gray-600 mt-1">
                                  Humeur: <span className="font-medium">{entry.mood}</span>
                                </div>
                              )}
                            </div>
                          </div>
                          <button
                            onClick={() => deleteJournalEntry(entry.id)}
                            className="p-2 text-red-500 hover:bg-red-50 rounded-lg transition-all transform hover:scale-110 active:scale-95"
                          >
                            <Trash2 size={20} />
                          </button>
                        </div>

                        {entry.content && (
                          <div className="mb-3">
                            <div className="text-gray-700 bg-gray-50 rounded-lg p-4 whitespace-pre-wrap">
                              {entry.content}
                            </div>
                          </div>
                        )}

                        <div className="flex items-center gap-2 mt-4">
                          <div className="text-xs font-semibold text-gray-500">Énergie:</div>
                          <div className="flex-1 h-2 bg-gray-200 rounded-full overflow-hidden">
                            <div
                              className="h-full rounded-full transition-all bg-gradient-to-r from-blue-400 to-indigo-500"
                              style={{width: `${entry.energy * 10}%`}}
                            />
                          </div>
                          <div className="text-sm font-bold text-gray-700">{entry.energy}/10</div>
                        </div>
                      </div>
                    ))}

                    {journalEntries.length === 0 && (
                      <div className="text-center py-16 text-gray-400">
                        <BookOpen size={64} className="mx-auto mb-4 opacity-20" />
                        <p className="text-lg">Aucune note de journal</p>
                        <p className="text-sm">Cliquez sur "Nouvelle note de journal" pour commencer</p>
                      </div>
                    )}
                  </div>
                )}
              </div>
            </div>
          );
        };

        ReactDOM.render(<AlcoholTracker />, document.getElementById('root'));
    </script>
</body>
</html>